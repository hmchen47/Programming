<!DOCTYPE html>
<html lang="en">
    <head>
       <meta charset="utf-8">
        <title>Animation</title>
      
   
 <style>
     #myCanvas {
         border: 1px solid black;
     }
 </style>
 <script>
   var canvas, ctx;
   var rectangleX = 0;
   var colors = ['red', 'blue', 'green'];
   var currentColor = 0;
   var speed = 3;
   function init() {
    // This function is called after the page is loaded
    // 1 - Get the canvas
    canvas = document.getElementById('myCanvas');
    // 2 - Get the context
    ctx=canvas.getContext('2d');
    // 3 - we can draw
    //setInterval(animate, 100);
    //setTimeout(animate, 100);
     
    requestAnimationFrame(animate);
    setInterval(changeColor, 1000);
   }
   
   function animate() {
     // - 1 clear canvas
     ctx.clearRect(0, 0, canvas.width, canvas.height);
     
     // 2 - draw a red rectangle
     
     ctx.fillRect(rectangleX,0,80,100);
     
     // 3 - move the shapes
     rectangleX = rectangleX +speed;
     if((rectangleX+80 > 200) || (rectangleX <= 0)){
       speed = -speed;
     }
     
     // Call again the anilate function after 100ms
     //setTimeout(animate, 100);
     requestAnimationFrame(animate);
   }
   
   function changeColor() {
     ctx.fillStyle= colors[currentColor%3];
     currentColor += 1;
     // Comment next line if you do not want to change the speed at
     // each bounce
     speed += Math.sign(speed)*1;
     console.log("speed = " + speed)
   }
 </script>
 </head>
<body onload="init();">
    <canvas id="myCanvas" width="200" height="200">
            Your browser does not support the canvas tag.
    </canvas>
</body>
</html>

